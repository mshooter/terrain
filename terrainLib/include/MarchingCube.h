#ifndef MARCHINGCUBE_H
#define MARCHINGCUBE_H

//-------------------------------------------------------------------------------------------------------
/// @author Moira Shooter
/// Modified from :-
/// Alberto La Scala. Marching Cubes
/// @note made it more simple, no lists of if statements anymore
/// @file MarchingCube.h
/// @brief does the Marching cubes algorithm, triangulate iso surfaces
/// @version
/// @date last revision 24 March 2018
/// \todo
//-------------------------------------------------------------------------------------------------------

#include <QOpenGLFunctions>
#include <vector>
#include "vec3.hpp"
#include "Polygon.h"

class MarchingCube
{
public:
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build constructor
    //------------------------------------------------------------------------------------------------------------------------------------------
    MarchingCube(int _NCells, int _axisMin, int _axisMax);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build deconstructor
    //------------------------------------------------------------------------------------------------------------------------------------------
    ~MarchingCube(){;}
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build get points from the 3D grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    std::vector<glm::vec3> getPoints();
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build Marching cube algorithm
    //------------------------------------------------------------------------------------------------------------------------------------------
    void MC(std::vector<glm::vec3> &_points,
            std::vector<float> &_values, std::vector<glm::vec3> &io_verts, std::vector<GLushort> &io_indices, std::vector<glm::vec3> &io_normals);
    // ----------------------------------------------------------------------------------------------------------------------------------------
    /// @build method that creates a 3D grid and stores them into a vector
    // ----------------------------------------------------------------------------------------------------------------------------------------
    void set3DGridPoints();


private:
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build amount of cells
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_NCells;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build range of the size of the cube
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_axisRange;
    // ----------------------------------------------------------------------------------------------------------------------------------------
    /// @build maxAxis
    // ----------------------------------------------------------------------------------------------------------------------------------------
    int m_axisMax;
    // ----------------------------------------------------------------------------------------------------------------------------------------
    /// @build minAxis
    // ----------------------------------------------------------------------------------------------------------------------------------------
    int m_axisMin;
    // ----------------------------------------------------------------------------------------------------------------------------------------
    /// @build a vector of grid points (3D)
    // ----------------------------------------------------------------------------------------------------------------------------------------
    std::vector<glm::vec3> m_gridPoints;
};

#endif // MARCHINGCUBE_H
