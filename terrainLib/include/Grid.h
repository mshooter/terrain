#ifndef GRID_H
#define GRID_H

//-------------------------------------------------------------------------------------------------------
/// @author Moira Shooter
/// @file Grid.h
/// @brief Creates different types of terrain, you can also edit terrain
/// @version
/// @date last revision 25 March 2018
/// \todo
//-------------------------------------------------------------------------------------------------------

#include <vector>
#include "vec3.hpp"
#include "MarchingCube.h"
#include "Polygon.h"
#include "Noise.h"



class Grid
{
public:
    enum MODELS {MODEL1, MODEL2, MODEL3, MODEL4, MODEL5};
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build default constructor
    //------------------------------------------------------------------------------------------------------------------------------------------
    Grid() = default;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build deconstructor
    //------------------------------------------------------------------------------------------------------------------------------------------
    ~Grid(){;}
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build create grid method
    /// @parm[_in] : io_verts : vertices of the mesh (set)
    /// @parm[_in] : io_indices : indices of the mesh (set)
    /// @parm[_in] : io_normals : normals of the mesh (set)
    /// @parm[_in] : _model : which type of terrain (One time noise, two time noise or 3 time noise)
    //------------------------------------------------------------------------------------------------------------------------------------------
    void createGrid(std::vector<glm::vec3> &io_verts, std::vector<GLushort> &io_indices,
                    std::vector<glm::vec3> &io_normals, int _model);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set frequency method
    /// @parm[_in] _freq : frequency of the terrain
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setFrequency(float _freq);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set height (amplitude) method
    /// @parm[_in] _height : amount of height (amplitude)
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setHeight(float _height);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set seed method
    /// @parm[_in] _seed : changes seed
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setSeed(int _seed);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set octaves method
    /// @parm[_in] _octaves : amount of octaves
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setOctaves(int _octaves);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set persistence method
    /// @parm[_in] _persistence : amount of persistence
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setPersistence(float _persistence);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build set resolution of grid method
    /// @parm[_in] _resolution : the amount of resolution on the grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    void setResolution(int _resolution);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build exports the mesh in file format .obj
    /// @parm[_in] : _vertices :  the vertices of the mesh
    /// @parm[_in] : _normals : the normals of the mesh
    /// @parm[_in] : _indices : the indices of the mesh
    //------------------------------------------------------------------------------------------------------------------------------------------
    void exportToObj(std::vector<glm::vec3> _vertices, std::vector<glm::vec3> _normals, std::vector<GLushort> _indices);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build get frequency of terrain method
    /// @return frequency of terrain
    //------------------------------------------------------------------------------------------------------------------------------------------
    float getFrequency();
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build get seed of terrain method
    /// @return seed of terrain
    //------------------------------------------------------------------------------------------------------------------------------------------
    int getSeed();
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build get height of terrain (amplitude) method
    /// @return the amplitude, height of terrain
    //------------------------------------------------------------------------------------------------------------------------------------------
    float getHeight();
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// TEST
    /// @build method to get if the file is exported or not
    /// @return if file is exported = true or not = false
    //------------------------------------------------------------------------------------------------------------------------------------------
    bool getFileExported();
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// TS+EST
    /// @build method to check if the grid is created
    /// @return if grid is created or not
    //------------------------------------------------------------------------------------------------------------------------------------------
    bool getIsGridCreated();


private:
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build variable of Polyon (signed distance field functions)
    //------------------------------------------------------------------------------------------------------------------------------------------
    Polygon *m_poly;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build Instance for using the marching cube algorithm
    //------------------------------------------------------------------------------------------------------------------------------------------
    MarchingCube cube = MarchingCube(60,-60,60);
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build instance of clas noise
    //------------------------------------------------------------------------------------------------------------------------------------------
    Noise noise;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build variable that holds the points of a 3d grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    std::vector<glm::vec3> m_3DPoints;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build variable that holds the values of each point on the gird
    //------------------------------------------------------------------------------------------------------------------------------------------
    std::vector<float> m_values;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build frequency of the grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    float m_frequency;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build height (amplitude) of the grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    float m_height;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build seed of grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_randomSeed;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build octaves of grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_octaves;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build the persistence of grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_persistence;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build the persistence of grid
    //------------------------------------------------------------------------------------------------------------------------------------------
    int m_resolution;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build variable to test if the file is exported
    //------------------------------------------------------------------------------------------------------------------------------------------
    bool m_fileExported = false;
    //------------------------------------------------------------------------------------------------------------------------------------------
    /// @build variable to test if the grid is created
    //------------------------------------------------------------------------------------------------------------------------------------------
    bool m_gridCreated = false;
};

#endif // GRID_H

